import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import path from 'path';

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [react()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
      '@components': path.resolve(__dirname, './components'),
      '@utils': path.resolve(__dirname, './utils'),
      '@contexts': path.resolve(__dirname, './contexts'),
      '@styles': path.resolve(__dirname, './styles'),
    },
  },
  server: {
    port: 3000,
    open: true,
    watch: {
      ignored: [
        '**/apps/**',
        '**/Flutter-UI/**',
        '**/V2_BACKUP/**',
        '**/V3_BACKUP/**',
        '**/flutter_app/**',
        '**/flutter_package/**',
        '**/native/**',
        '**/react-app/**',
        '**/react-native-app/**',
        '**/sublimes_drive_flutter/**',
        '**/web/**',
        '**/guidelines/**',
        '**/node_modules/**',
        '**/.git/**',
      ],
    },
  },
  build: {
    outDir: 'dist',
    sourcemap: true,
  },
  // Exclude irrelevant folders from processing
  optimizeDeps: {
    exclude: [
      'apps',
      'Flutter-UI',
      'V2_BACKUP',
      'V3_BACKUP',
      'flutter_app',
      'flutter_package',
      'native',
      'react-app',
      'react-native-app',
      'sublimes_drive_flutter',
      'web',
      'guidelines',
    ],
  },
});
